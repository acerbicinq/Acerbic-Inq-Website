---
// Simple Spotify auth test page
---

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>Spotify Test</title>
  </head>
  <body>
    <h1>Spotify Authentication Test</h1>
    <p>This page will help debug the Spotify authentication issue.</p>
    
    <div id="debug-info">
      <h2>Debug Information:</h2>
      <div id="client-id"></div>
      <div id="redirect-uri"></div>
      <div id="auth-url"></div>
    </div>
    
    <button id="test-auth">Test Spotify Auth</button>
    
    <script>
      const SPOTIFY_CLIENT_ID = '14bd95608ea1475a8e8ce783fb072e53';
      const SPOTIFY_REDIRECT_URI = window.location.origin + '/spotify-callback';
      const SPOTIFY_SCOPES = 'streaming user-read-email user-read-private';
      
      // Display debug info
      document.getElementById('client-id').textContent = `Client ID: ${SPOTIFY_CLIENT_ID}`;
      document.getElementById('redirect-uri').textContent = `Redirect URI: ${SPOTIFY_REDIRECT_URI}`;
      
      const authUrl = `https://accounts.spotify.com/authorize?client_id=${SPOTIFY_CLIENT_ID}&response_type=token&redirect_uri=${encodeURIComponent(SPOTIFY_REDIRECT_URI)}&scope=${encodeURIComponent(SPOTIFY_SCOPES)}`;
      document.getElementById('auth-url').innerHTML = `<strong>Auth URL:</strong><br><a href="${authUrl}" target="_blank">${authUrl}</a>`;
      
      document.getElementById('test-auth').addEventListener('click', function() {
        console.log('Testing Spotify auth...');
        console.log('Auth URL:', authUrl);
        
        // Try direct navigation
        window.location.href = authUrl;
      });
    </script>
  </body>
</html>